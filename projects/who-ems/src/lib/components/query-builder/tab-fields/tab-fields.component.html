<div cdkDropListGroup>
    <div class="example-container">
        <h2>Available fields</h2>

        <div cdkDropList [cdkDropListData]="availableFields" class="example-list" cdkDropListSortingDisabled
            (cdkDropListDropped)="drop($event)">
            <div class="example-box" *ngFor="let field of availableFields" cdkDrag>{{ field.name }}<span
                    class="field-type" *ngIf="field.type.kind !== 'SCALAR'">{{ field.type.kind }}</span></div>
        </div>
    </div>

    <div class="example-container">
        <h2>Selected fields</h2>

        <div cdkDropList [cdkDropListData]="selectedFields" class="example-list" (cdkDropListDropped)="drop($event)">
            <div class="example-box" *ngFor="let field of selectedFields; let index = index" cdkDrag>{{ field.name }}
                <div>
                    <span class="field-type" *ngIf="field.type.kind !== 'SCALAR'">{{ field.type.kind }}</span>
                    <button mat-icon-button (click)="onEdit(index)">
                        <mat-icon>edit</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="example-container" *ngIf="fieldForm">
        <ng-container *ngIf="fieldForm.value.kind === 'SCALAR'">
            <form [formGroup]="fieldForm">
                <mat-form-field appearance="outline">
                    <mat-label>Field name</mat-label>
                    <input matInput formControlName="name" type="text" disabled/>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Label</mat-label>
                    <input matInput formControlName="label" type="text"/>
                </mat-form-field>
            </form>
        </ng-container>
        <ng-container *ngIf="fieldForm.value.kind !== 'SCALAR'">
            <who-query-builder [form]="fieldForm"></who-query-builder>
        </ng-container>
    </div>
</div>