<form [formGroup]="form">
    <mat-form-field appearance="outline">
        <mat-label>Query name</mat-label>
        <mat-select formControlName="name">
            <mat-option *ngFor="let type of availableQueries | async" [value]="type.name">
                {{type.name}}
            </mat-option>
        </mat-select>
    </mat-form-field>
    <mat-tab-group mat-align-tabs="start" animationDuration="0ms" *ngIf="form.value.name">
        <mat-tab label="Fields">
            <ng-template matTabContent>
                <who-tab-fields [form]="form.controls.sort" [fields]="availableFields"></who-tab-fields>
            </ng-template>
        </mat-tab>
        <mat-tab label="Sort">
            <ng-template matTabContent>
                <who-tab-sort [form]="form.controls.sort" [fields]="availableFields"></who-tab-sort>
            </ng-template>
        </mat-tab>
        <mat-tab label="Filter">
            <ng-template matTabContent>
                <who-tab-filter [form]="form.controls.filter" [filters]="availableFilters"></who-tab-filter>
            </ng-template>
        </mat-tab>
    </mat-tab-group>
</form>