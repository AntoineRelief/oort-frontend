<div class="container">
  <div class="top-bar">
    <div class="users">
      <div class="users-wrapper">
        <mat-icon>person</mat-icon>
        <div class="users-count"> <div [innerText]="numberFormatter(app.usersCount)"></div> </div>
      </div>
    </div>
    <div class="status" [ngStyle]="{'background-color': this.badge.backgroundColor}">
      <div [innerText]="this.badge.letter" [ngStyle]="{'color': this.badge.color}"> </div>
    </div>
  </div>
  <div class="app-name" [innerText]="app.name? app.name : '?'" (click)="appClick($event)"> </div>
  <div class="bottom-bar">
    <div>
      <div> <div [innerText]="app.createdAt"> </div> </div>
      <safe-button [isIcon]="true" icon="more_vert" [matMenuTriggerFor]="menu"></safe-button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="previewEvent.emit(app)">
          <mat-icon>preview</mat-icon>
          Preview
        </button>
        <safe-access [menuItem]="true" [access]="app.permissions" (save)="saveAccessEvent.emit({event: $event, app: app})"
                     *ngIf="app.canUpdate"></safe-access>
        <button mat-menu-item (click)="duplicateEvent.emit(app)" *ngIf="app.canDelete">
          <mat-icon>file_copy</mat-icon>
          Duplicate
        </button>
        <ng-container *ngIf="app.canDelete">
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="this.deleteEvent.emit({event: $event, app: app})">
            <mat-icon>delete</mat-icon>
            Delete
          </button>
        </ng-container>
      </mat-menu>
    </div>
  </div>
</div>
